<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Band Practice Setlist</title>
    <style>
        /* --- CSS VARIABLES FOR THEME --- */
        :root {
            --song-label-color: #4a9b58; /* Green Label */
            --page-bg: #222;
            --cell-bg-top: #1a1a1a;
            --cell-bg-bottom: #000000;
            --cell-border: #444;
            --shadow-color: #000;
        }

        /* --- BASE STYLES --- */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: var(--page-bg); 
            /* Improved font stack */
            font-family: 'Inter', BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
            overflow: hidden;
            cursor: pointer; /* Keep for fullscreen toggle */
        }

        /* --- THE GRID --- */
        .container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(8, 1fr);
            grid-auto-flow: column; 
            gap: 6px;
            height: 100vh;
            padding: 10px;
            box-sizing: border-box;
        }

        /* --- THE CELLS --- */
        .song-cell {
            border: 1px solid var(--cell-border); 
            background-color: var(--cell-bg-bottom);
            /* Gradient for subtle depth */
            background-image: linear-gradient(to bottom, var(--cell-bg-top), var(--cell-bg-bottom)); 
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 10px;
            overflow: hidden;
            position: relative;
            border-radius: 6px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5); 
        }

        /* --- THE TEXT --- */
        .song-name {
            color: var(--song-label-color);
            font-weight: 900;
            text-transform: none;
            white-space: nowrap;
            font-size: 11vh; /* Initial size, will be adjusted by JS */
            line-height: 1;
            outline: none;
            font-family: inherit; /* Inherit the main improved font stack */
            
            /* Cleaner shadow for pop */
            text-shadow: 2px 2px 0px var(--shadow-color), 4px 4px 0px #111;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
        <div class="song-cell"><span class="song-name"></span></div>
    </div>

    <script>
        // ======================================================
        // YOUR SONG LIST
        // ======================================================
        const setlistData = `
Clarity
Time Machine
Live Another Day (II)
House Arrest
Go Funk Yourself
Night Into Day
Blues In Your Soul (IV)
Runner’s High
Your Lady Doesn’t Love You
I’m Sorry
Pyroclastic
The Void (II)
Smoke & Mirrors (II)
River Road
Get Back
Catch The Moon
Carnivore
On My Own
BlackJack
I Want To Know Why
Break The Chain
Beaten & Broken
Sultans Of Sound [D]
Crazy [D]
        `;
        // ======================================================

        /**
         * Debounce function to limit how often a function is run.
         * Crucial for window.onresize performance.
         */
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        /**
         * Populates the grid cells and dynamically resizes the text.
         */
        function populateAndResize() {
            const songs = setlistData.trim().split('\n').filter(line => line.trim() !== '');
            const cells = document.querySelectorAll('.song-cell');
            
            cells.forEach((cell, index) => {
                const textSpan = cell.querySelector('.song-name');
                
                if (songs[index]) {
                    textSpan.innerText = songs[index];
                } else {
                    textSpan.innerText = "";
                }

                // Resize Logic: Start high and shrink until it fits
                let fontSize = 11; 
                textSpan.style.fontSize = fontSize + 'vh';
                
                while (textSpan.scrollWidth > (cell.clientWidth - 15) && fontSize > 0.5) {
                    fontSize -= 0.2; 
                    textSpan.style.fontSize = fontSize + 'vh';
                }
            });
        }

        // CLICK TO TOGGLE FULLSCREEN (Improved Cross-Browser)
        document.body.addEventListener('click', () => {
            if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {
                // Request fullscreen using vendor prefixes
                const docEl = document.documentElement;
                (docEl.requestFullscreen || docEl.webkitRequestFullscreen || docEl.msRequestFullscreen).call(docEl);
            } else {
                // Exit fullscreen using vendor prefixes
                const doc = document;
                if (doc.exitFullscreen || doc.webkitExitFullscreen || doc.msExitFullscreen) {
                    (doc.exitFullscreen || doc.webkitExitFullscreen || doc.msExitFullscreen).call(doc);
                }
            }
        });

        // Use the debounced function for window resize events
        const debouncedPopulateAndResize = debounce(populateAndResize, 100);

        window.onload = populateAndResize;
        window.onresize = debouncedPopulateAndResize;
    </script>
</body>
</html>
